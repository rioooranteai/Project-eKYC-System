<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Veriface ‚Äî Scan KTP</title>
  <link rel="stylesheet" href="../css/global.css" />
  <link rel="stylesheet" href="../css/scan.css" />
</head>
<body>

<header>
  <a href="../index.html" class="logo">VERI<span>FACE</span></a>
  <div class="nav-steps">
    <div class="nav-step done">
      <div class="step-num">1</div>
      <span>Home</span>
    </div>
    <span class="nav-sep">‚Ä∫</span>
    <div class="nav-step active">
      <div class="step-num">2</div>
      <span>Scan KTP</span>
    </div>
    <span class="nav-sep">‚Ä∫</span>
    <div class="nav-step">
      <div class="step-num">3</div>
      <span>Verifikasi Wajah</span>
    </div>
  </div>
  <div class="status-pill" id="wsPill">
    <div class="dot"></div>
    <span id="wsStatus">Menghubungkan...</span>
  </div>
</header>

<main>

  <!-- Video Panel -->
  <div class="video-panel">
    <div class="panel-label">// scan ktp ‚Äî arahkan ktp ke kamera</div>

    <div class="video-wrapper" id="videoWrapper">
      <video id="video" autoplay playsinline muted></video>
      <div class="video-overlay" id="overlay">
        <div class="camera-icon">ü™™</div>
        <div class="overlay-text">Memulai kamera...</div>
      </div>
      <div class="flash" id="flash"></div>
    </div>

    <div class="status-badge idle" id="scanStatus">
      <span id="scanStatusText">‚è≥ Menunggu KTP...</span>
    </div>

    <div class="progress-wrap">
      <div class="progress-label">
        <span>Kelengkapan Data</span>
        <span id="progressPct">0%</span>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" id="progressFill"></div>
      </div>
    </div>

    <div class="controls">
      <button class="btn danger" id="btnStop">‚ñ† Stop</button>
      <a href="face.html" class="btn primary" id="btnNext" style="pointer-events:none;opacity:0.3">
        Lanjut Verifikasi Wajah ‚Ä∫
      </a>
    </div>
  </div>

  <!-- Log & Result Panel -->
  <div class="log-panel">
    <div class="log-header">
      <div class="log-title">Hasil Scan</div>
      <div class="log-count" id="logCount">0 field</div>
    </div>

    <div class="log-body" id="resultBody">
      <!-- KTP fields akan muncul di sini -->
      <div class="log-empty" id="resultEmpty">Belum ada data KTP.</div>
    </div>

    <div class="stats-bar">
      <div class="stat">
        <div class="stat-label">Frames</div>
        <div class="stat-value" id="statFrames">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Fields</div>
        <div class="stat-value" id="statFields">0</div>
      </div>
      <div class="stat">
        <div class="stat-label">Conf.</div>
        <div class="stat-value" id="statConf">‚Äî</div>
      </div>
    </div>
  </div>

</main>

<footer>
  <span>POST /webrtc/offer ¬∑ WS /webrtc/ws/notify</span>
  <span id="iceState" style="color: var(--accent)">ICE: ‚Äî</span>
</footer>

<script src="../js/webrtc.js"></script>
<script src="../js/ocr.js"></script>
</body>
</html>